<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>swiper js</title>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <style>
       
      html,
      body {
        position: relative;
        height: 100%;
      }

      body {
        background: #eee;
        font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
        font-size: 14px;
        color: #000;
        margin: 0;
        padding: 0;
      }

      .swiper {
        width: 100%;
        height: 100%;
      }

      .swiper-slide {
        text-align: center;
        font-size: 18px;
        background: violet;
       
        
        /* Center slide text vertically */
        display: -webkit-box;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
      }

      .swiper-slide img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .swiper {
        width: 100%;
        height: 300px;
        margin: 20px auto;
      }
      .append-buttons {
        text-align: center;
        margin-top: 20px;
      }

      .append-buttons button {
        display: inline-block;
        cursor: pointer;
        border: 1px solid #007aff;
        color: #007aff;
        text-decoration: none;
        padding: 4px 10px;
        border-radius: 4px;
        margin: 0 10px;
        font-size: 13px;
      }
    </style>
    </style>
</head>

<body>
    <!-- Swiper -->
    <div #swiperRef="" class="swiper mySwiper">
        <div class="swiper-wrapper">
          <div class="swiper-slide"></div>
          <div class="swiper-slide"></div>
          <div class="swiper-slide"></div>
          <div class="swiper-slide"></div>
          <div class="swiper-slide"></div>
          <div class="swiper-slide"></div>
          <div class="swiper-slide"></div>
          <div class="swiper-slide"></div>
          <div class="swiper-slide"></div>
          <div class="swiper-slide"></div>
        </div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-pagination"></div>
      </div>
  
  
  
    <h3>영화정보</h3>
    원하는 날짜영화:<input type="date" id="searchDt" required><button id="btnBoxOffice">주간랭킹</button>
    <div id="result">

    </div>


    <script>
        btnBoxOffice.addEventListener('click', getBoxOffice);

        function getBoxOffice() {
            $('#result').empty();
            let year = (searchDt.value).substring(0, 4);
            let month = (searchDt.value).substring(5, 7);
            let day = (searchDt.value).substring(8, 10);
            let date = year + month + day;
            let url =
                "http://kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchWeeklyBoxOfficeList.json?key=f5eef3421c602c6cb7ea224104795888&targetDt=" +
                date;
            fetch(url)
                .then(response => response.json())
                .then(response => {
                    console.log(response);
                    let list = response.boxOfficeResult
                        .weeklyBoxOfficeList;

                    let swiperList = document.getElementsByClassName('swiper-slide');

                    for (var i = 0; i < swiperList.length; i++) {
                        console.log(swiperList[i]);
                        var moveName=document.createElement('p');
                        moveName.innerHTML=list[i].movieNm;
                        var moveRank=document.createElement('p');
                        moveRank.innerHTML=list[i].rank+'등';
                        var moveaudiAcc=document.createElement('p');
                        moveaudiAcc.innerHTML='누적관광객:'+list[i].audiAcc+'명';
                        swiperList[i].appendChild(moveRank);
                        swiperList[i].appendChild(moveName);
                        swiperList[i].appendChild(moveaudiAcc);
                        
                    }

                    /* for (i = 0; i < list.length; i++) {
                         //div태그생성
                         let newDiv = document.createElement('div');

                         newDiv.innerHTML =
                             `<div><span  id="moveNameList">${list[i].movieNm}</span><span class="audiAcc">${list[i].audiAcc}명</span><span class="movieRank">${list[i].rank}등</span></div>`;
                         result.append(newDiv);
                     }*/
                });
        }

        //swiper
        var swiper = new Swiper(".mySwiper", {
        slidesPerView: 3,
        centeredSlides: true,
        spaceBetween: 30,
        pagination: {
          el: ".swiper-pagination",
          type: "fraction",
        },
        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
        },
      });

      
      
    </script>

</body>

</html>