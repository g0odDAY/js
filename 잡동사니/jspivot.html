<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
</head>
<body>
<h2>hight chart</h2>
<div id="pvtTable"></div>
<h2>Original Array</h2>
<div id="orgTable"></div>

<h2>Converted Array</h2>
<div id="pivotTable"></div>  
</body>
<script>

    function pivot(input_arr) {
    var seen_periods = {};
    var periods_in_order = [];

    var tag_to_identifier = {};
    var tag_to_period_factor = {};

    for(let i = 0; i < arr.length; i++) {
        const row = arr[i];

        if(!tag_to_identifier[row[1]]) {
            tag_to_identifier[row[1]] = row[0];
        }


        if(!tag_to_period_factor[row[1]]) {
            tag_to_period_factor[row[1]] = {}
        }

        tag_to_period_factor[row[1]][row[3]] = row[2];

        if (!seen_periods[row[3]]) {
            seen_periods[row[3]] = true;
        }
    }

    var periods_in_order = Object.keys(seen_periods);
    periods_in_order.sort();

    var all_tags = Object.keys(tag_to_identifier);
    all_tags.sort();

    var header = ["Identif","TAG"];

    periods_in_order.map(function(period) {
        header.push(period);
    })

    var rows = [
        header,
    ];

    all_tags.map(function(tag) {
        var new_row = [ tag_to_identifier[tag], tag ];
        periods_in_order.map(function(period) {
            new_row.push(tag_to_period_factor[tag][period] || "-");
        })

        rows.push(new_row);
    })


    return rows;

}

var arr = [
    ["0092000115", 1, "0.354", "2019-06"],
    ["0092000115", 1, "0.354", "2019-05"],
    ["0092000115", 1, "0.456", "2019-04"],
    ["0092000115", 1, "0.892", "2019-03"],
    ["0092000115", 1, "0.654", "2019-02"],
    ["0092000115", 1, "0.64", "2019-01"],
    ["0092000115", 2, "0.795", "2019-02"],
    ["0092000138", 3, "0.654", "2019-03"],
    ["0092000138", 3, "0.64", "2019-02"],
    ["0092000138", 3, "0.94", "2019-01"],
    ["0092000138", 4, "0.795", "2019-04"]
];

var arr1 = [
//["Product", "Year", "Sales"],
["Product 1", "2009", "1212"],
["Product 2", "2009", "522"],
["Product 1", "2010", "1337"],
["Product 2", "2011", "711"],
["Product 2", "2012", "2245"],
["Product 3", "2012", "1000"]
];
var expected =  [["Identif","TAG", "2019-01", "2019-02", "2019-03", "2019-04", "2019-05", "2019-06"],
                 ["0092000115","1", "0.64", "0.654", "0.892", "0.456", "0.354", "0.354"],
                 ["0092000115","2", "-", "0.795", "-", "-", "-", "-"],
                 ["0092000138","3", "0.94", "0.64", "0.654", "-", "-", "-"],
                 ["0092000138","4", "-", "-", "-", "0.795", "-", "-"]];
let arr2 =[
    [
        "군구명",
        "용  도",
        "승 용",
        "승 합",
        "화물",
        "특 수"
    ],
    [
        "중구",
        "비사업용",
        "636",
        "3",
        "54",
        "0"
    ],
    [
        "중구",
        "사업용",
        "55",
        "12",
        "0",
        "0"
    ],
    [
        "동구",
        "비사업용",
        "82",
        "0",
        "18",
        "0"
    ],
    [
        "동구",
        "사업용",
        "22",
        "0",
        "37",
        "0"
    ],
    [
        "미추홀구",
        "비사업용",
        "527",
        "0",
        "102",
        "0"
    ],
    [
        "미추홀구",
        "사업용",
        "240",
        "0",
        "172",
        "0"
    ],
    [
        "연수구",
        "비사업용",
        "1714",
        "2",
        "94",
        "0"
    ],
    [
        "연수구",
        "사업용",
        "173",
        "67",
        "110",
        "0"
    ],
    [
        "남동구",
        "비사업용",
        "1475",
        "0",
        "172",
        "0"
    ],
    [
        "남동구",
        "사업용",
        "353",
        "0",
        "196",
        "0"
    ],
    [
        "부평구",
        "비사업용",
        "904",
        "0",
        "85",
        "0"
    ],
    [
        "부평구",
        "사업용",
        "107",
        "0",
        "179",
        "0"
    ],
    [
        "계양구",
        "비사업용",
        "327",
        "0",
        "97",
        "0"
    ],
    [
        "계양구",
        "사업용",
        "2906",
        "0",
        "142",
        "0"
    ],
    [
        "서구",
        "비사업용",
        "1576",
        "0",
        "252",
        "0"
    ],
    [
        "서구",
        "사업용",
        "183",
        "43",
        "223",
        "0"
    ],
    [
        "강화군",
        "비사업용",
        "304",
        "0",
        "141",
        "0"
    ],
    [
        "강화군",
        "사업용",
        "128",
        "24",
        "26",
        "0"
    ],
    [
        "옹진군",
        "비사업용",
        "59",
        "0",
        "14",
        "0"
    ],
    [
        "옹진군",
        "사업용",
        "12",
        "0",
        "6",
        "0"
    ]
];

let arr3 = [
    [
        "mttrClCd",
        "tmzonCd",
        "cnt"
    ],
    [
        "00",
        "00",
        "86"
    ],
    [
        "00",
        "01",
        "86"
    ],
    [
        "00",
        "02",
        "85"
    ],
    [
        "00",
        "03",
        "84"
    ],
    [
        "00",
        "04",
        "86"
    ],
    [
        "00",
        "05",
        "84"
    ],
    [
        "00",
        "06",
        "85"
    ],
    [
        "00",
        "07",
        "95"
    ],
    [
        "00",
        "08",
        "112"
    ],
    [
        "00",
        "09",
        "141"
    ],
    [
        "00",
        "10",
        "170"
    ],
    [
        "00",
        "11",
        "179"
    ],
    [
        "00",
        "12",
        "168"
    ],
    [
        "00",
        "13",
        "176"
    ],
    [
        "00",
        "14",
        "180"
    ],
    [
        "00",
        "15",
        "175"
    ],
    [
        "00",
        "16",
        "169"
    ],
    [
        "00",
        "17",
        "156"
    ],
    [
        "00",
        "18",
        "149"
    ],
    [
        "00",
        "19",
        "120"
    ],
    [
        "00",
        "20",
        "93"
    ],
    [
        "00",
        "21",
        "83"
    ],
    [
        "00",
        "22",
        "70"
    ],
    [
        "00",
        "23",
        "68"
    ],
    [
        "CH",
        "08",
        "1"
    ],
    [
        "CH",
        "09",
        "3"
    ],
    [
        "CH",
        "10",
        "3"
    ],
    [
        "CH",
        "11",
        "3"
    ],
    [
        "CH",
        "12",
        "3"
    ],
    [
        "CH",
        "13",
        "3"
    ],
    [
        "CH",
        "14",
        "5"
    ],
    [
        "CH",
        "15",
        "7"
    ],
    [
        "CH",
        "16",
        "7"
    ],
    [
        "CH",
        "17",
        "7"
    ],
    [
        "DG",
        "08",
        "2"
    ],
    [
        "DG",
        "09",
        "4"
    ],
    [
        "DG",
        "10",
        "10"
    ],
    [
        "DG",
        "11",
        "24"
    ],
    [
        "DG",
        "12",
        "18"
    ],
    [
        "DG",
        "13",
        "17"
    ],
    [
        "DG",
        "14",
        "21"
    ],
    [
        "DG",
        "15",
        "31"
    ],
    [
        "DG",
        "16",
        "33"
    ],
    [
        "DG",
        "17",
        "33"
    ],
    [
        "DG",
        "18",
        "42"
    ],
    [
        "DG",
        "19",
        "33"
    ],
    [
        "DG",
        "20",
        "21"
    ],
    [
        "DG",
        "21",
        "22"
    ],
    [
        "DG",
        "22",
        "19"
    ],
    [
        "DG",
        "23",
        "18"
    ],
    [
        "GS",
        "17",
        "1"
    ],
    [
        "GS",
        "18",
        "2"
    ],
    [
        "WS",
        "18",
        "1"
    ],
    [
        "WS",
        "19",
        "1"
    ]
];
let arr4 = [
    [
        "day",
        "tmzonCd",
        "cnt"
    ],
    [
        "20211000",
        "00",
        "64"
    ],
    [
        "20211000",
        "07",
        "82"
    ],
    [
        "20211000",
        "08",
        "20"
    ],
    [
        "20211000",
        "23",
        "23"
    ],
    [
        "20211001",
        "14",
        "14"
    ],
    [
        "20211002",
        "05",
        "2"
    ],
    [
        "20211002",
        "08",
        "15"
    ],
    [
        "20211002",
        "14",
        "89"
    ],
    [
        "20211002",
        "15",
        "76"
    ],
    [
        "20211003",
        "01",
        "141"
    ],
    [
        "20211003",
        "03",
        "9"
    ],
    [
        "20211003",
        "04",
        "77"
    ],
    [
        "20211003",
        "11",
        "49"
    ],
    [
        "20211003",
        "20",
        "41"
    ],
    [
        "20211004",
        "01",
        "93"
    ],
    [
        "20211004",
        "06",
        "45"
    ],
    [
        "20211004",
        "07",
        "124"
    ],
    [
        "20211004",
        "08",
        "67"
    ],
    [
        "20211004",
        "09",
        "53"
    ],
    [
        "20211004",
        "10",
        "182"
    ],
    [
        "20211004",
        "19",
        "58"
    ],
    [
        "20211004",
        "23",
        "76"
    ],
    [
        "20211005",
        "00",
        "56"
    ],
    [
        "20211005",
        "09",
        "35"
    ],
    [
        "20211005",
        "10",
        "43"
    ],
    [
        "20211006",
        "00",
        "94"
    ],
    [
        "20211006",
        "03",
        "13"
    ],
    [
        "20211006",
        "08",
        "48"
    ],
    [
        "20211006",
        "09",
        "38"
    ],
    [
        "20211006",
        "12",
        "55"
    ],
    [
        "20211006",
        "14",
        "75"
    ],
    [
        "20211006",
        "22",
        "86"
    ],
    [
        "20211007",
        "05",
        "97"
    ],
    [
        "20211007",
        "12",
        "17"
    ],
    [
        "20211008",
        "11",
        "46"
    ],
    [
        "20211008",
        "13",
        "48"
    ],
    [
        "20211008",
        "23",
        "13"
    ],
    [
        "20211009",
        "00",
        "81"
    ],
    [
        "20211009",
        "07",
        "31"
    ],
    [
        "20211009",
        "11",
        "7"
    ],
    [
        "20211009",
        "14",
        "44"
    ],
    [
        "20211009",
        "19",
        "51"
    ],
    [
        "20211009",
        "20",
        "26"
    ],
    [
        "20211010",
        "06",
        "50"
    ],
    [
        "20211010",
        "11",
        "58"
    ],
    [
        "20211010",
        "14",
        "45"
    ],
    [
        "20211010",
        "15",
        "88"
    ],
    [
        "20211010",
        "16",
        "18"
    ],
    [
        "20211010",
        "23",
        "75"
    ],
    [
        "20211011",
        "03",
        "7"
    ],
    [
        "20211011",
        "07",
        "55"
    ],
    [
        "20211011",
        "19",
        "0"
    ],
    [
        "20211012",
        "07",
        "39"
    ],
    [
        "20211012",
        "14",
        "92"
    ],
    [
        "20211013",
        "02",
        "19"
    ],
    [
        "20211013",
        "14",
        "70"
    ],
    [
        "20211013",
        "17",
        "57"
    ],
    [
        "20211013",
        "21",
        "108"
    ],
    [
        "20211013",
        "22",
        "0"
    ],
    [
        "20211014",
        "16",
        "71"
    ],
    [
        "20211014",
        "18",
        "49"
    ],
    [
        "20211014",
        "21",
        "72"
    ],
    [
        "20211014",
        "22",
        "7"
    ],
    [
        "20211014",
        "23",
        "95"
    ],
    [
        "20211015",
        "12",
        "18"
    ],
    [
        "20211015",
        "13",
        "12"
    ],
    [
        "20211016",
        "03",
        "70"
    ],
    [
        "20211016",
        "06",
        "97"
    ],
    [
        "20211016",
        "07",
        "90"
    ],
    [
        "20211017",
        "04",
        "64"
    ],
    [
        "20211017",
        "06",
        "13"
    ],
    [
        "20211017",
        "09",
        "31"
    ],
    [
        "20211017",
        "10",
        "83"
    ],
    [
        "20211017",
        "15",
        "2"
    ],
    [
        "20211017",
        "23",
        "27"
    ],
    [
        "20211018",
        "00",
        "41"
    ],
    [
        "20211018",
        "05",
        "86"
    ],
    [
        "20211018",
        "10",
        "88"
    ],
    [
        "20211018",
        "11",
        "68"
    ],
    [
        "20211018",
        "13",
        "27"
    ],
    [
        "20211018",
        "17",
        "0"
    ],
    [
        "20211019",
        "03",
        "17"
    ],
    [
        "20211019",
        "05",
        "99"
    ],
    [
        "20211019",
        "10",
        "91"
    ],
    [
        "20211019",
        "11",
        "98"
    ],
    [
        "20211019",
        "13",
        "39"
    ],
    [
        "20211019",
        "17",
        "56"
    ],
    [
        "20211020",
        "01",
        "56"
    ],
    [
        "20211020",
        "04",
        "37"
    ],
    [
        "20211020",
        "12",
        "2"
    ],
    [
        "20211020",
        "19",
        "91"
    ],
    [
        "20211021",
        "01",
        "30"
    ],
    [
        "20211021",
        "03",
        "3"
    ],
    [
        "20211021",
        "04",
        "96"
    ],
    [
        "20211021",
        "07",
        "2"
    ],
    [
        "20211021",
        "16",
        "94"
    ],
    [
        "20211021",
        "17",
        "14"
    ],
    [
        "20211022",
        "15",
        "35"
    ],
    [
        "20211022",
        "19",
        "46"
    ],
    [
        "20211022",
        "22",
        "71"
    ],
    [
        "20211023",
        "02",
        "41"
    ],
    [
        "20211023",
        "12",
        "7"
    ],
    [
        "20211023",
        "14",
        "61"
    ],
    [
        "20211023",
        "18",
        "91"
    ],
    [
        "20211023",
        "21",
        "18"
    ],
    [
        "20211024",
        "00",
        "107"
    ],
    [
        "20211024",
        "04",
        "55"
    ],
    [
        "20211024",
        "06",
        "157"
    ],
    [
        "20211024",
        "10",
        "18"
    ],
    [
        "20211025",
        "04",
        "87"
    ],
    [
        "20211025",
        "13",
        "53"
    ],
    [
        "20211025",
        "16",
        "96"
    ],
    [
        "20211025",
        "22",
        "23"
    ],
    [
        "20211026",
        "02",
        "86"
    ],
    [
        "20211026",
        "13",
        "28"
    ],
    [
        "20211026",
        "15",
        "77"
    ],
    [
        "20211026",
        "17",
        "11"
    ],
    [
        "20211026",
        "19",
        "92"
    ],
    [
        "20211026",
        "20",
        "79"
    ],
    [
        "20211026",
        "21",
        "71"
    ],
    [
        "20211026",
        "23",
        "63"
    ],
    [
        "20211027",
        "08",
        "51"
    ],
    [
        "20211027",
        "09",
        "14"
    ],
    [
        "20211027",
        "11",
        "75"
    ],
    [
        "20211028",
        "06",
        "81"
    ],
    [
        "20211028",
        "08",
        "88"
    ],
    [
        "20211028",
        "14",
        "95"
    ],
    [
        "20211028",
        "15",
        "75"
    ],
    [
        "20211028",
        "16",
        "80"
    ],
    [
        "20211028",
        "20",
        "37"
    ],
    [
        "20211028",
        "22",
        "50"
    ],
    [
        "20211029",
        "02",
        "29"
    ],
    [
        "20211029",
        "17",
        "71"
    ],
    [
        "20211200",
        "00",
        "82"
    ],
    [
        "20211200",
        "06",
        "15"
    ],
    [
        "20211200",
        "07",
        "37"
    ],
    [
        "20211200",
        "12",
        "76"
    ],
    [
        "20211200",
        "14",
        "99"
    ],
    [
        "20211200",
        "16",
        "91"
    ],
    [
        "20211200",
        "19",
        "74"
    ],
    [
        "20211200",
        "20",
        "89"
    ],
    [
        "20211200",
        "23",
        "19"
    ],
    [
        "20211201",
        "06",
        "63"
    ],
    [
        "20211201",
        "07",
        "21"
    ],
    [
        "20211201",
        "08",
        "23"
    ],
    [
        "20211201",
        "12",
        "94"
    ],
    [
        "20211201",
        "14",
        "66"
    ],
    [
        "20211201",
        "19",
        "77"
    ],
    [
        "20211202",
        "06",
        "13"
    ],
    [
        "20211202",
        "07",
        "52"
    ],
    [
        "20211202",
        "11",
        "64"
    ],
    [
        "20211202",
        "19",
        "55"
    ],
    [
        "20211202",
        "23",
        "54"
    ],
    [
        "20211203",
        "06",
        "96"
    ],
    [
        "20211204",
        "03",
        "99"
    ],
    [
        "20211204",
        "06",
        "99"
    ],
    [
        "20211204",
        "21",
        "75"
    ],
    [
        "20211205",
        "03",
        "66"
    ],
    [
        "20211205",
        "04",
        "32"
    ],
    [
        "20211205",
        "06",
        "87"
    ],
    [
        "20211205",
        "08",
        "61"
    ],
    [
        "20211205",
        "23",
        "45"
    ],
    [
        "20211206",
        "02",
        "28"
    ],
    [
        "20211206",
        "10",
        "46"
    ],
    [
        "20211206",
        "11",
        "40"
    ],
    [
        "20211206",
        "16",
        "28"
    ],
    [
        "20211207",
        "01",
        "9"
    ],
    [
        "20211207",
        "02",
        "63"
    ],
    [
        "20211207",
        "06",
        "95"
    ],
    [
        "20211207",
        "07",
        "42"
    ],
    [
        "20211208",
        "04",
        "66"
    ],
    [
        "20211208",
        "06",
        "73"
    ],
    [
        "20211209",
        "04",
        "39"
    ],
    [
        "20211209",
        "23",
        "82"
    ],
    [
        "20211210",
        "03",
        "144"
    ],
    [
        "20211210",
        "05",
        "76"
    ],
    [
        "20211210",
        "06",
        "45"
    ],
    [
        "20211210",
        "11",
        "61"
    ],
    [
        "20211210",
        "12",
        "20"
    ],
    [
        "20211210",
        "21",
        "16"
    ],
    [
        "20211211",
        "06",
        "179"
    ],
    [
        "20211211",
        "10",
        "14"
    ],
    [
        "20211212",
        "01",
        "70"
    ],
    [
        "20211212",
        "06",
        "31"
    ],
    [
        "20211212",
        "11",
        "15"
    ],
    [
        "20211213",
        "01",
        "89"
    ],
    [
        "20211213",
        "06",
        "8"
    ],
    [
        "20211213",
        "08",
        "69"
    ],
    [
        "20211213",
        "09",
        "61"
    ],
    [
        "20211213",
        "16",
        "22"
    ],
    [
        "20211213",
        "19",
        "49"
    ],
    [
        "20211213",
        "22",
        "38"
    ],
    [
        "20211214",
        "08",
        "74"
    ],
    [
        "20211214",
        "19",
        "42"
    ],
    [
        "20211214",
        "23",
        "98"
    ],
    [
        "20211215",
        "02",
        "10"
    ],
    [
        "20211215",
        "04",
        "12"
    ],
    [
        "20211215",
        "20",
        "85"
    ],
    [
        "20211216",
        "02",
        "97"
    ],
    [
        "20211216",
        "06",
        "48"
    ],
    [
        "20211216",
        "09",
        "3"
    ],
    [
        "20211216",
        "11",
        "46"
    ],
    [
        "20211216",
        "13",
        "86"
    ],
    [
        "20211216",
        "17",
        "59"
    ],
    [
        "20211216",
        "20",
        "14"
    ],
    [
        "20211217",
        "00",
        "58"
    ],
    [
        "20211217",
        "01",
        "20"
    ],
    [
        "20211217",
        "12",
        "76"
    ],
    [
        "20211217",
        "13",
        "4"
    ],
    [
        "20211217",
        "14",
        "57"
    ],
    [
        "20211218",
        "06",
        "80"
    ],
    [
        "20211218",
        "09",
        "17"
    ],
    [
        "20211218",
        "13",
        "74"
    ],
    [
        "20211219",
        "00",
        "12"
    ],
    [
        "20211219",
        "01",
        "68"
    ],
    [
        "20211219",
        "02",
        "57"
    ],
    [
        "20211219",
        "13",
        "96"
    ],
    [
        "20211219",
        "16",
        "84"
    ],
    [
        "20211219",
        "18",
        "73"
    ],
    [
        "20211220",
        "00",
        "7"
    ],
    [
        "20211220",
        "14",
        "36"
    ],
    [
        "20211220",
        "20",
        "50"
    ],
    [
        "20211221",
        "02",
        "14"
    ],
    [
        "20211221",
        "04",
        "32"
    ],
    [
        "20211221",
        "05",
        "1"
    ],
    [
        "20211221",
        "06",
        "80"
    ],
    [
        "20211221",
        "07",
        "88"
    ],
    [
        "20211221",
        "16",
        "15"
    ],
    [
        "20211222",
        "05",
        "85"
    ],
    [
        "20211222",
        "06",
        "2"
    ],
    [
        "20211222",
        "10",
        "26"
    ],
    [
        "20211222",
        "11",
        "99"
    ],
    [
        "20211222",
        "19",
        "82"
    ],
    [
        "20211222",
        "21",
        "54"
    ],
    [
        "20211222",
        "22",
        "68"
    ],
    [
        "20211223",
        "13",
        "41"
    ],
    [
        "20211223",
        "21",
        "86"
    ],
    [
        "20211224",
        "06",
        "150"
    ],
    [
        "20211224",
        "08",
        "21"
    ],
    [
        "20211224",
        "11",
        "77"
    ],
    [
        "20211224",
        "22",
        "49"
    ],
    [
        "20211225",
        "06",
        "85"
    ],
    [
        "20211225",
        "11",
        "86"
    ],
    [
        "20211225",
        "19",
        "1"
    ],
    [
        "20211225",
        "22",
        "26"
    ],
    [
        "20211226",
        "09",
        "36"
    ],
    [
        "20211226",
        "10",
        "18"
    ],
    [
        "20211226",
        "20",
        "87"
    ],
    [
        "20211226",
        "22",
        "111"
    ],
    [
        "20211227",
        "03",
        "79"
    ],
    [
        "20211227",
        "06",
        "97"
    ],
    [
        "20211227",
        "10",
        "64"
    ],
    [
        "20211227",
        "11",
        "96"
    ],
    [
        "20211227",
        "12",
        "87"
    ],
    [
        "20211227",
        "21",
        "24"
    ],
    [
        "20211227",
        "22",
        "46"
    ],
    [
        "20211228",
        "05",
        "23"
    ],
    [
        "20211228",
        "06",
        "50"
    ],
    [
        "20211228",
        "19",
        "89"
    ],
    [
        "20211228",
        "20",
        "37"
    ],
    [
        "20211229",
        "01",
        "1"
    ],
    [
        "20211229",
        "05",
        "31"
    ],
    [
        "20211229",
        "08",
        "10"
    ],
    [
        "20211229",
        "22",
        "20"
    ],
    [
        "20211229",
        "23",
        "54"
    ]
];
var got = pivot(arr);
console.log(got);

console.log("Matches expected: " + (JSON.stringify(expected) === JSON.stringify(got)).toString());

/*
dataArray: 변환할 배열
rowIndex: 배열에서 첫 번째 열*로 보관할 열의 인덱스
colIndex: 출력 배열에서 열*로 값을 변환할 열의 인덱스.
dataIndex: 데이터로 사용할 값이 있는 열의 인덱스(표/그리드 형식으로 표시).
*/
function getPivotArray(dataArray, rowIndex, colIndex, dataIndex) {
       
        let result = {};
        let ret = [];
        let newCols = [];
        for (let i = 1; i < dataArray.length; i++) {
 
            if (!result[dataArray[i][rowIndex]]) {
                result[dataArray[i][rowIndex]] = {};
            }
            result[dataArray[i][rowIndex]][dataArray[i][colIndex]] = dataArray[i][dataIndex];
 
            //To get column names
            if (newCols.indexOf(dataArray[i][colIndex]) == -1) {
                newCols.push(dataArray[i][colIndex]);
            }
        }
        newCols.sort();
        var item = [];
        //행[0]추가
        item.push('value');
        item.push.apply(item, newCols);
        ret.push(item);
 
        //내용추가
        for (var key in result) {
            item = [];
            item.push(key);
            for (var i = 0; i < newCols.length; i++) {
                item.push(result[key][newCols[i]] || 0);
            }
            ret.push(item);
        }
        return ret;
    }
    
    
function arrayToHTMLTable(myArray) {
           var result = "<table id='pvtTable' border='1' cellpadding='7' cellspacing='0'>";
           for (var i = 0; i < myArray.length; i++) {
               result += "<tr>";
               for (var j = 0; j < myArray[i].length; j++) {
                   result += "<td>" + myArray[i][j] + "</td>";
               }
               result += "</tr>";
           }
           result += "</table>";
           return result;
       }   
  
     
$(function () {
          var output = getPivotArray(arr4, 0, 1, 2);
          console.log(output);
          $('#orgTable').html(arrayToHTMLTable(arr4));
          $('#pivotTable').html(arrayToHTMLTable(output));
      });  
</script>
</html>