<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.13.4/underscore-min.js" integrity="sha512-uLKRd6hCNYAENFn2h7w0p5hrUAz21bAu/85eqSqmQ1Y565lFInwRga9Lgk+QAAR9QvNfSlZjnEb+HHfzkAC/8Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</head>
<body>
<div class="user-list"></div>
</body>
<script>
    let users =[
        {id:1,name:'HA',age:25},
        {id:2,name:'PJ',age:28},
        {id:3,name:'JE',age:27},
    ];


    //Good example
    // $(".user-list").append(
    //     _.map(users,function(user){
    //         let button = $('<button>').text(user.name);
    //         button.click(function(){
    //             console.log("z");
    //             if(confirm(user.name+"님을 팔로우 하시겟습니까??")) follow(user);
    //         });
    //         return button;
    //     }));
    // function follow(user){
    //     $.post('/follow',{user_id:user.id},function(){
    //         alert("이제"+user.name+"님의 소식을 볼 수 있습니다.");
    //     });
    // }

    //1.흔한 클로저 실수 - 어떤 버튼을 클릭해도 JE
    // var buttons=[];
    // for(var i =0;i<users.length;i++){
    //     var user = users[i];
    //     buttons.push($('<button>').text(user.name).click(function(){
    //         console.log(user.name);
    //     }))
    // }
    // $('.user-list').append(buttons);

    //2.절차지향적 해결 - 어차피 함수의 도움을 받아야함. 각각 다른이름이 잘나옴
    // var buttons=[];
    // for(var i = 0;i<users.length;i++){
    //     (function (user){})
    //     buttons.push($('<button>').text(user.name).click(function(){
    //         console.log(user.name);
    //     }));
    // }

    //3
    $('.user-list').append(
      _.map(users,user => $('<button>').text(user.name).click(()=>console.log(user.name)))
    );
    function abc(a,b,c){
        console.log(a,b,c);
    }
    let ac = _.partial(abc,_,'b');
    ac('a','c');
    let b = _.partial(abc,'a',_,'c');
    b('b');

    let bj ={
        name:"bj",
        greet:_.partial((a,b)=> a+this.name+b,"저는","입니다.")
    }
</script>
</html>